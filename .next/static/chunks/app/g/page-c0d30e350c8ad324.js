(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[250],{4945:function(e,s,a){Promise.resolve().then(a.bind(a,9495))},2313:function(e,s,a){"use strict";a.r(s),a.d(s,{GlobalContextProvider:function(){return o},useGlobalContext:function(){return r}});var t=a(9268),l=a(6006),n=function(e){let s=e.state,a=(0,l.useRef)(null);return(0,l.useEffect)(()=>{var e,t;s?null==a||null===(e=a.current)||void 0===e||e.play():null==a||null===(t=a.current)||void 0===t||t.pause()},[s]),(0,t.jsx)("div",{className:"absolute",children:(0,t.jsx)("audio",{ref:a,autoPlay:s,loop:!0,children:(0,t.jsx)("source",{src:"/bg.mpga",type:"audio/mpeg"})})})};let c=(0,l.createContext)({}),o=e=>{let{children:s}=e,a=(0,l.useState)(10),o=(0,l.useState)(5),r=(0,l.useState)(3),d=(0,l.useState)(0),i=(0,l.useState)(!1),m=(0,l.useState)(-1),[u,x]=(0,l.useState)(!0),h={state:u,toggle:()=>{x(!u)}};return(0,t.jsxs)(c.Provider,{value:{remainingState:a,scoreState:o,roundState:r,isSubmitingState:i,matchedState:m,tabState:d,restartGame:()=>{a[1](10),i[1](!1),m[1](-1)},username:"soham",BGMusicState:h},children:[(0,t.jsx)(n,{state:h.state}),s]})},r=()=>(0,l.useContext)(c)},2006:function(e,s,a){"use strict";var t=a(9268),l=a(4415),n=a.n(l),c=a(6006);s.Z=function(e){let[s,a]=(0,c.useState)(e.defaultOpen||!1);return(0,t.jsxs)(t.Fragment,{children:[e.defaultOpen||(0,t.jsx)("label",{onClick:()=>a(!s),className:"btn ".concat(e.buttonClassName," ").concat(n().className),children:e.btnname}),(0,t.jsx)("input",{type:"checkbox",id:e.id,checked:s,defaultChecked:e.defaultOpen,onChange:e=>{},className:"modal-toggle"}),(0,t.jsx)("div",{className:"modal ".concat(e.modalClassName),children:(0,t.jsxs)("div",{className:"modal-box bg-base border-2 nobar broder-white ".concat(n().className),children:[(0,t.jsx)("h3",{className:"font-bold text-2xl text-primary",children:e.title}),(0,t.jsx)("div",{className:"flex flex-col mt-3",children:e.children}),(0,t.jsxs)("div",{className:"modal-action flex justify-between",children:[(0,t.jsx)("div",{children:e.actions}),e.customClose?(0,t.jsx)("label",{onClick:()=>{window.location.href=e.customClose&&(null==e?void 0:e.customClose[1])||"/"},className:"btn btn-error ".concat(n().className),children:e.customClose[0]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("label",{onClick:()=>a(!1),className:"btn btn-error ".concat(n().className),children:"Close"})})]})]})})]})}},9495:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return F}});var t=a(9268),l=a(8461),n=a.n(l),c=a(5894),o=a.n(c),r=a(6006),d=a(6008),i={client:new(a(575)).Client("ws://localhost:2567")},m=a(2006),u=a(2313),x=a(2214),h=a.n(x),g=a(9937);a(1707);var b={src:"/_next/static/media/not found.dce63206.png",height:240,width:359,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAAAAABd+vKJAAAAJElEQVR42mXJoQEAMAjEwN9/s1aiEqYBz9kLsiTiwtD1fklODfWaIatrrWqNAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5};let j={height:"100%",overflow:"hidden"},f={backgroundSize:"cover",backgroundPosition:"center",height:"100%",width:"100%"};var N=function(e){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{style:j,children:(0,t.jsx)(g.Mi,{duration:3e3,autoplay:!0,infinite:!1,arrows:!1,transitionDuration:200,easing:"ease",children:e.data.map((s,a)=>(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"py-60",style:{...f,backgroundImage:"url(".concat(s.img?s.img:'"'.concat(b.src,'"'),")")},children:(0,t.jsxs)("span",{className:"absolute bottom-0 p-4 backdrop-blur-md w-full text-2xl font-semibold text-primary ".concat(h().className),children:[s.name,(0,t.jsx)("br",{}),(0,t.jsx)("p",{className:"text-gray-800 p-1 rounded bg-slate-400 text-sm",children:!0===s.matched?"\uD83C\uDF89 They found it":"Lol they even don't have a ".concat(e.objname,".")})]})})},a))})})})},p=a(5488),v=a.n(p),y=a(6179),w=a.n(y);let S={width:720,height:720,facingMode:"user"},C={width:720,height:720,facingMode:"environment"};var R=e=>{let{matchedState:s,isSubmitingState:a}=(0,u.useGlobalContext)(),[l,n]=(0,r.useState)(!1),[c,o]=(0,r.useState)(!1),d=(0,r.useRef)(null),i=(0,r.useRef)(null),m=()=>{var e,s;null===(e=d.current)||void 0===e||null===(s=e.video)||void 0===s||s.pause(),o(!0)},x=()=>{var s,t;a[1](!0);let l=null===(s=null===(t=d.current)||void 0===t?void 0:t.getScreenshot())||void 0===s?void 0:s.replace("data:image/jpeg;base64,","");e.submitImage(l),setTimeout(()=>{a[1](!0)},3e3)},h=()=>{var e,s;null===(e=d.current)||void 0===e||null===(s=e.video)||void 0===s||s.play(),o(!1),a[1](!1)};return(0,r.useEffect)(()=>{e.canRetake&&h()},[e.canRetake]),(0,t.jsx)(t.Fragment,{children:-1==s[0]&&(0,t.jsx)("div",{id:"capture",className:"flex flex-col justify-end m-1 mt-2 p-2 bg-stone-800 aspect-square rounded-lg",ref:i,children:(0,t.jsx)(w(),{className:"rounded-md shadow-md bg-slate-800 aspect-square",alt:"Loading...",ref:d,audio:!1,height:720,screenshotFormat:"image/jpeg",width:720,videoConstraints:l?S:C,children:e=>{let{getScreenshot:s}=e;return c?a[0]?(0,t.jsx)("div",{className:"flex flex-col bg-slate-700 mt-2 rounded-md p-3 items-center gap-2",children:(0,t.jsx)("progress",{className:"progress progress-primary w-full p-0 m-0"})}):(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{className:"btn btn-sm flex-1 btn-secondary mt-2 ".concat(v().className),onClick:x,children:"Submit"}),(0,t.jsx)("button",{className:"btn btn-sm w-2/6 btn-error mt-2 ".concat(v().className),onClick:h,children:"Retake"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"btn btn-sm btn-secondary mt-2  ".concat(v().className),style:{textShadow:"2px 2px 2px #0004"},onClick:m,children:"Capture"}),(0,t.jsx)("button",{className:"btn btn-sm btn-secondary mt-2 ".concat(v().className),style:{textShadow:"2px 2px 2px #0004"},onClick:()=>{n(!l)},children:"Rotate Camera"})]})}})})||(0,t.jsxs)("div",{children:["Your image ",s[0],"% matched"]})})},k=a(8172),A=a.n(k),E=a(6248),O=a.n(E),M=e=>{let s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{var e,a;null==s||null===(e=s.current)||void 0===e||e.scrollTo(0,null==s?void 0:null===(a=s.current)||void 0===a?void 0:a.scrollHeight)},[e.msgs]),(0,t.jsxs)("div",{id:"chat",className:"flex flex-col m-2 p-2 h-full",children:[(0,t.jsx)("div",{className:"text-primary text-left text-xl font-bold p-1",children:"CHAT"}),(0,t.jsx)("div",{id:"chat-list",ref:s,className:"flex flex-col gap-1 w-full p-2 overflow-auto h-44",children:e.msgs.map((e,s)=>e.username&&(0,t.jsxs)("div",{className:O().className,children:[e.username,": ",e.message]},s))}),(0,t.jsxs)("div",{className:"flex gap-2 items-center justify-between mt-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"Type here",value:e.msg,onKeyDown:s=>{"Enter"===s.key&&e.sendMsg()},onChange:s=>e.setMsg(s.target.value),className:"input bg-slate-600 input-bordered w-full ".concat(O().className)}),(0,t.jsx)("button",{className:"btn btn-primary ".concat(A().className),onClick:e.sendMsg,children:"Send"})]})]})},D=function(e){return(0,r.useEffect)(()=>{},[]),(0,t.jsx)("div",{className:"overflow-x-scroll rounded bg-base-200 m-1 mt-2 nobar lg:h-40 sm:h-72",children:(0,t.jsxs)("table",{className:"table center border-separate bg-base-200 p-1 rounded-lg table-pin-rows",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-primary font-semibold",children:"#"}),(0,t.jsx)("th",{className:"text-primary font-semibold",children:"Name"}),(0,t.jsx)("th",{className:"text-primary font-semibold",children:"Score"})]})}),(0,t.jsx)("tbody",{children:e.data&&Object.entries(e.data).map((e,s)=>{let[a,l]=e;return(0,t.jsxs)("tr",{className:0===s&&"bg-primary text-black"||"",children:[(0,t.jsx)("td",{children:s+1}),(null==l?void 0:l.name)?(0,t.jsx)("td",{children:null==l?void 0:l.name}):(0,t.jsx)("td",{children:"---"}),(0,t.jsx)("td",{children:null==l?void 0:l.score})]},s)})})]})})};let I=new Date().getTime(),T=()=>Math.round((new Date().getTime()-I)/600);var F=()=>{let e=(0,d.useSearchParams)(),[s,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[x,h]=(0,r.useState)({}),[g,b]=(0,r.useState)(""),[j,f]=(0,r.useState)([{username:"",message:""}]),[p,v]=(0,r.useState)([{username:"",score:0}]),[y,w]=(0,r.useState)(0),[S,C]=(0,r.useState)(""),[k,A]=(0,r.useState)(0),[E,O]=(0,r.useState)(0),[I,F]=(0,r.useState)(0),[G,L]=(0,r.useState)(!0),[P,_]=(0,r.useState)(!1),[J,B]=(0,r.useState)("started"),[Q,q]=(0,r.useState)(""),[z,H]=(0,r.useState)([{img:"",name:"",matched:void 0}]),U=()=>{console.log("ROOM OBJ",x),P||(console.log("Ready",T()),x.send("ready"),_(!0))},W=e=>{console.log("Game Starts"),B("started"),v(e.leaderboard)},Z=e=>{console.log("Game Ends"),B("ended"),v(e.leaderboard),w(1)},K=e=>{console.log("Round Starts",T(),e.curRound),q("started"),L(!0),C(e.objname),O(e.curRound+1),X(e.time)},Y=e=>{console.log("Round Ends",T(),e.curScore),console.log(e.imgs),q("ended"),L(!1),H(e.imgs),v(e.leaderboard),A(e.curScore)},V=e=>{j.push(e),f(j.slice()),console.log(j)};async function X(e){for(let s=e;s>=0;s--)F(s),await new Promise(e=>setTimeout(e,1e3))}(0,r.useEffect)(()=>{let s=e.get("id")||void 0,t=e.get("rc")||!1;function l(e,s){console.log("JOINED ROOM",e),h(e),s?(console.log("ROOM ID",e.id),a(e.id)):setTimeout(()=>{P||(console.log("AUTO READY",T()),e.send("ready"),_(!0))},5e3),e.onMessage("gameStarts",e=>W(e)),e.onMessage("gameEnds",e=>Z(e)),e.onMessage("roundStarts",e=>{K(e)}),e.onMessage("roundEnds",e=>{Y(e)}),e.onMessage("chat",e=>{V(e)})}return a(s||""),c("true"===t),console.log("ID",s),console.log("isRoomCreator",t),s?i.client.joinById(s).then(e=>{l(e,!1)}).catch(e=>{alert("Error: joining room, try again with valid room id"),console.log("JOIN ERROR",e)}):i.client.joinOrCreate("my_room",{username:localStorage.getItem("username")}).then(s=>{let a="true"===e.get("rc");console.log("IS RC",a),l(s,a)}).catch(e=>{alert("Error: joining room, try again with valid room id"),console.log("JOIN ERROR",e)}),()=>{}},[]);let{username:$}=(0,u.useGlobalContext)();return(0,t.jsxs)("div",{className:"relative h-full",children:[(0,t.jsx)("div",{className:"".concat(o().className)}),"waiting"===J&&(0,t.jsx)(m.Z,{customClose:["Quit","/menu"],enable:!0,defaultOpen:!0,actions:(0,t.jsx)("div",{children:P?(0,t.jsx)("div",{className:"font-semibold text-lg ".concat(o().className),children:"Wait for others"}):(0,t.jsx)("button",{disabled:!x,className:"btn btn-secondary font-bold ".concat(o().className),onClick:()=>{U()},children:"Ready"})}),id:"a",btnname:"LOL",title:"Object Hunt",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-2xl",children:"Are you ready to Play?"}),(0,t.jsx)("p",{className:"font-bold ".concat(o().className),children:"Click on the below button and wait for the other players"}),l&&(0,t.jsxs)("p",{className:"font-bold ".concat(o().className),children:["Room Id:"," ",(0,t.jsx)("span",{onClick:()=>{navigator.clipboard.writeText(s)},className:"text-primary bg-zinc-800 p-1 rounded-md ".concat(o().className),children:s})]})]})}),"ended"===J&&(0,t.jsx)(m.Z,{customClose:["Quit","/menu"],enable:!0,defaultOpen:!0,id:"gameended",btnname:"LOL",title:"Game Ended",children:(0,t.jsx)(D,{data:p})}),"ended"===Q&&(0,t.jsx)(m.Z,{enable:!0,defaultOpen:!0,id:"RoundEnd",title:"Round End",btnname:"lol",children:(0,t.jsx)(N,{data:z,objname:S})}),(0,t.jsx)("div",{className:"my-2"}),(0,t.jsxs)("div",{className:"bg-base-200 p-2 m-1 rounded-md flex justify-between",children:[(0,t.jsxs)("div",{className:"text-xl ".concat(n().className),children:["Find a"," ",(0,t.jsx)("span",{className:"text-primary capitalize ".concat(n().className),children:S||"Object"})]}),(0,t.jsxs)("div",{className:"text-xl ".concat(o().className),children:[(0,t.jsx)(t.Fragment,{}),I,"s left"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-md m-1 bg-base-200 p-2 ".concat(o().className," rounded-md"),children:[(0,t.jsxs)("div",{children:["Score: ",k]}),(0,t.jsxs)("div",{children:["Round: ",E]})]}),(0,t.jsxs)("div",{className:"h-full bg-red-500",children:[(0,t.jsx)(R,{submitImage:e=>{console.log("Sending image",null==e?void 0:e.substring(0,3)),x.send("img",e)},canRetake:G}),(0,t.jsxs)("div",{className:"tabs tabs-boxed m-1 mt-1.5",children:[(0,t.jsx)("a",{className:0==y&&"tab-active tab w-1/2 ".concat(n().className)||"tab w-1/2 ".concat(n().className),onClick:()=>w(0),children:"Chat"}),(0,t.jsx)("a",{className:1==y&&"tab-active tab w-1/2 ".concat(n().className)||"tab w-1/2 ".concat(n().className),onClick:()=>w(1),children:"Leaderboard"})]}),(0,t.jsxs)("div",{className:"bg-blue-500 h-full w-full flex-1",children:[0==y&&(0,t.jsx)(M,{msg:g,msgs:j,setMsg:b,sendMsg:()=>{g&&x&&(console.log("Sending msg",g),x.send("chat",g),b(""))}}),1==y&&(0,t.jsx)(D,{data:p})]})]}),!1]})}}},function(e){e.O(0,[224,607,253,769,744],function(){return e(e.s=4945)}),_N_E=e.O()}]);